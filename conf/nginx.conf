# Static Mode Configuration
# Serves static files directly from www directory

location / {
    # Path to source
    alias __INSTALL_DIR__/www/;

    # Default indexes
    index index.html index.htm;

    # Disable directory listing
    autoindex off;

    # Block access to sensitive file extensions
    location ~* \.(json|tpl|ini|env|php)$ {
        deny all;
    }

    # Prevent useless logs
    location = /favicon.ico {
        log_not_found off;
        access_log off;
    }

    location = /robots.txt {
        allow all;
        log_not_found off;
        access_log off;
    }

    # Deny access to hidden files and directories (except .well-known)
    location ~ ^/(.+/|)\.(?!well-known\/) {
        deny all;
    }

    # Include additional app-specific configs
    include conf.d/__DOMAIN__.d/__APP__.d/*.conf;

    # Include SSOWAT user panel
    include conf.d/yunohost_panel.conf.inc;
}
