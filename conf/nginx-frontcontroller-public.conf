# Front Controller Public - Laravel/Symfony style
# La racine HTTP pointe sur www/public, index.php dans public reçoit les requêtes
location __PATH__/ {
    # On veut que la racine HTTP pointe sur www/public
    alias __INSTALL_DIR__/www/public/;
    index index.php index.html;
    
    # Front controller: index.php reçoit tout sauf fichiers existants
    try_files $uri $uri/ /__PATH__/index.php?$args;
    
    # Sécurité : accès aux fichiers cachés interdit
    location ~ ^__PATH__/(.+/|)\.(?!well-known\/) {
        deny all;
    }
    
    # Inclusion des configurations supplémentaires
    include conf.d/__DOMAIN__.d/__APP__.d/*.conf;
}
