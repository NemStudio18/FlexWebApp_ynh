# Pre-Upgrade Notes for Version 1.0~ynh15 üîÑ

Important information about upgrading to this version of My Webapp.

## ‚ö†Ô∏è Important Changes

This version introduces significant improvements to the NGINX configuration system and overall application structure.

### New NGINX Configuration Modes

The application now supports three distinct NGINX installation modes:

- **Static Mode**: Traditional file serving (default)
- **Front Mode**: Front controller pattern for modern PHP applications
- **Public Mode**: Front controller with public directory separation

### Enhanced Security Features

- Automatic protection for sensitive files (`.env`, `.json`, `.ini`, `.tpl`)
- Hidden directory protection (except `.well-known/`)
- Improved PHP-FPM integration across all modes

## üîß Upgrade Process

### Automatic Migration

The upgrade process will automatically:
- Preserve your existing configuration
- Update NGINX configurations to the new system
- Maintain your current PHP version and database settings
- Preserve all uploaded files and customizations

### Configuration Updates

After upgrade, you can:
- Switch between NGINX modes through the configuration panel
- Modify PHP version settings
- Adjust SFTP configuration
- Update database settings

## üìã Pre-Upgrade Checklist

### Before Upgrading

- [ ] **Backup your data**: Ensure you have recent backups
- [ ] **Check disk space**: Ensure sufficient space for upgrade
- [ ] **Review custom configurations**: Note any custom NGINX modifications
- [ ] **Test in staging**: If possible, test upgrade on a copy first

### During Upgrade

- **Do not interrupt** the upgrade process
- **Wait for completion** before accessing the application
- **Check logs** if issues occur

## üöÄ New Features

### Enhanced File Management

- Improved SFTP access with automatic password generation
- Better file permission handling
- Enhanced security for sensitive files

### Improved PHP Support

- PHP-FPM integration across all NGINX modes
- Better performance and security
- Support for latest PHP versions

### Configuration Flexibility

- Easy switching between NGINX modes
- Improved configuration panel
- Better error handling and logging

## üîç Post-Upgrade Verification

### Check These Items

1. **Application accessibility**: Visit your application URL
2. **SFTP functionality**: Test file upload/download
3. **PHP functionality**: Verify PHP pages work correctly
4. **Configuration panel**: Access and review settings
5. **Error pages**: Test custom error handling if configured

### Expected Behavior

- All existing files should remain accessible
- SFTP access should work with current credentials
- PHP applications should function normally
- Custom configurations should be preserved

## üö® Known Issues

### Potential Considerations

- **Custom NGINX configurations**: May need adjustment for new system
- **File permissions**: Some files may need permission updates
- **PHP compatibility**: Ensure PHP version compatibility

### Troubleshooting

If issues occur after upgrade:

1. **Check application logs**: `sudo yunohost app log __APP__`
2. **Review NGINX configuration**: Check for syntax errors
3. **Verify PHP-FPM status**: Ensure service is running
4. **Check file permissions**: Verify web server access

## üìö Additional Information

### Documentation Updates

- New comprehensive administration guide
- Updated post-installation instructions
- Enhanced troubleshooting guides
- Configuration examples and best practices

### Support Resources

- **Application logs**: Available through YunoHost admin panel
- **NGINX logs**: `/var/log/nginx/error.log`
- **PHP-FPM logs**: `/var/log/php__VERSION__-fpm.log`
- **YunoHost documentation**: [yunohost.org/docs](https://yunohost.org/docs)

## üéØ Upgrade Benefits

This upgrade provides:
- **Better security**: Enhanced file protection and access control
- **Improved performance**: Optimized NGINX configurations
- **More flexibility**: Multiple NGINX modes for different use cases
- **Better maintainability**: Cleaner configuration management
- **Enhanced features**: Improved SFTP, PHP, and database support

## üìû Need Help?

If you encounter issues during or after the upgrade:

1. **Check the logs** first for specific error messages
2. **Review this documentation** for common solutions
3. **Consult YunoHost community** for additional support
4. **Check application configuration** for any misconfigurations

The upgrade process is designed to be smooth and preserve all your existing data and configurations. üöÄ
